import{config}from"./config";export class ptgcspsdk{public static sendLogin(channel:number,action:number,openid:string,isnew:number,from_appid?:string,from_imgid?:number,code?:string,callBack?:Function){if(!isnew){isnew=0}let data={channel:channel,action:action,openid:openid,from_appid:from_appid,from_imgid:from_imgid,my_appid:config.appid,code:code,isnew:isnew};NetWork.sendPost(data,callBack)}public static sendAuthorize(channel:number,action:number,openid:string,isnew:number,from_appid?:string,from_imgid?:number,code?:string,callBack?:Function){if(!isnew){isnew=0}let data={channel:channel,action:action,openid:openid,from_appid:from_appid,from_imgid:from_imgid,my_appid:config.appid,code:code,isnew:isnew};NetWork.sendPost(data,callBack)}public static startGame(channel:number,action:number,openid:string,callBack?:Function){let data={channel:channel,action:action,openid:openid,my_appid:config.appid};NetWork.sendPost(data,callBack)}public static sendShare(channel:number,action:number,openid:string,type:number,callBack?:Function){let data={channel:channel,action:action,openid:openid,my_appid:config.appid,type:type};NetWork.sendPost(data,callBack)}public static watchVideo(channel:number,action:number,openid:string,type:number,callBack?:Function){let data={channel:channel,action:action,openid:openid,my_appid:config.appid,type:type};NetWork.sendPost(data,callBack)}public static sendJump(channel:number,action:number,openid:string,my_uuid:string,to_appid:string,callBack?:Function){let data={channel:channel,action:action,openid:openid,my_appid:config.appid,my_uuid:my_uuid,to_appid:to_appid};NetWork.sendPost(data,callBack)}public static sendEvent(openid:string,eventid:number,callBack?:Function){let data={openid:openid,eventId:eventid,appid:config.appid,};NetWork.sendPost(data,callBack,"/saveEvent")}public static getJumpGameList(callBack?:Function){NetWork.sendPost({appid:config.appid,},callBack,"/getJumpInfo")}public static getGameSwitch(callBack?:Function){NetWork.sendGet('/index/switch_new?appid='+config.appid+'&version='+config.version,2,callBack)}public static getTouTiaoOpenid(code:string,anonymous_code:string,callBack?:Function){NetWork.sendGet('/service/getTouTiaoOpenid?appid='+config.appid+'&code='+code+'&anonymous_code='+anonymous_code,1,callBack)}public static getWxOpenid(code:string,anonymous_code:string,callBack?:Function){NetWork.sendGet('/service/getWxOpenid?appid='+config.appid+"&code="+code,1,callBack)}public static getQQOpenid(code:string,callBack?:Function){NetWork.sendGet('/service/getQQOpenid?appid='+config.appid+"&js_code="+code,1,callBack)}public static getOppoOpenid(token:string,callBack?:Function){NetWork.sendGet('/service/getOppoOpenid?pkgName='+config.pkgName+"&token="+token+"&appid="+config.appKey,1,callBack)}public static getVivoOpenid(token:string,callBack?:Function){NetWork.sendGet('/service/getVivoOpenid?pkgName='+config.pkgName+"&token="+token+"&appid="+config.appKey,1,callBack)}public static collection(action,openid,callBack){var data={action:action,openid:openid,my_appid:config.appid,};NetWork.sendPost(data,callBack)}public static probability(callBack){var data={appid:config.appid,};NetWork.sendPost(data,callBack,"/probability")}}class NetWork{public static sendPost(data,call_back=null,action=null){let xhr=new XMLHttpRequest();let url=config.url;if(action){url=url+action}xhr.open("POST",url);xhr.onreadystatechange=function(){if(xhr.readyState==4&&(xhr.status>=200&&xhr.status<=207)){if(call_back){if(config.env=="develop"){console.log(url+"",JSON.parse(xhr.responseText))}call_back(JSON.parse(xhr.responseText))}}};let dataStr=JSON.stringify(data);xhr.setRequestHeader('content-type','application/x-www-form-urlencoded');xhr.send("param="+encodeURIComponent(dataStr))}public static sendGet(action,type,call_back){var xhr=new XMLHttpRequest();let url=config.switchUrl;if(type==1){url=config.url}xhr.open("GET",url+action);xhr.onreadystatechange=function(){if(xhr.readyState==4&&(xhr.status>=200&&xhr.status<=207)){if(call_back){if(config.env=="develop"){console.log(config.switchUrl+action+"ï¼š",JSON.parse(xhr.responseText))}call_back(JSON.parse(xhr.responseText))}}};xhr.send()}}export enum ActionType{Login=1005,Authority=1006,Start=1008,Share=1009,Video=1010,VideoSuccess=1011,Jump=1007,JumpSuccess=1017}export enum uuidType{Left=1001,Right=1002,Settlement=1003,Common=1004,SettlementScroll=1006,ReviveScroll=1007,LobbyScroll=1008}